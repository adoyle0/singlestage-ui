@layer components {
  .singlestage-button-group {
    @apply [&>*]:focus-visible:relative
    [&>*]:focus-visible:z-10
    [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit
    [&>input]:flex-1
    flex
    has-[>[data-slot=button-group]]:gap-2
    has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md
    items-stretch
    w-fit;
  }

  .singlestage-button-group-horizontal {
    > *:not(:first-child) {
      @apply !border-l-0
        !rounded-l-none;
    }

    > .singlestage-dropdown-menu:not(:first-child) {
      > button {
        @apply !border-l-0
        !rounded-l-none;
      }
    }

    > *:not(:last-child) {
      @apply !rounded-r-none;
    }

    > .singlestage-dropdown-menu:not(:last-child) {
      > button {
        @apply rounded-r-none;
      }
    }
  }

  .singlestage-button-group-vertical {
    > *:not(:first-child) {
      @apply !border-t-0
        !rounded-t-none;
    }

    > .singlestage-dropdown-menu:not(:first-child) {
      > button {
        @apply !border-t-0
        !rounded-t-none;
      }
    }

    > *:not(:last-child) {
      @apply !rounded-b-none;
    }

    > .singlestage-dropdown-menu:not(:last-child) {
      > button {
        @apply !rounded-b-none;
      }
    }

    @apply flex-col;
  }

  .singlestage-button-group-text {
    @apply [&_svg:not([class*='size-'])]:size-4
    [&_svg]:pointer-events-none
    bg-muted
    border
    flex
    font-medium
    gap-2
    items-center
    px-4
    rounded-md
    shadow-xs
    text-sm;
  }

  .singlestage-button-group-separator {
    @apply !m-0
    bg-input
    data-[orientation=vertical]:h-auto
    relative
    self-stretch;
  }
}
